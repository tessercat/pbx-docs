digraph {
    label="RegisterView GET";

    GET[shape="invhouse"];

    404[shape="house"];
    register_new[shape="house"];
    register_replace[shape="house"];
    unregister[shape="house"];

    init_session[shape="box"];

    GET -> request_ext_exists;

    request_ext_exists -> init_session[label="yes"];
    request_ext_exists -> 404[label="no"];

    init_session -> session_has_ext;

    session_has_ext -> request_ext_is_session_ext[label="yes"];
    session_has_ext -> request_ext_is_registered[label="no"];

    request_ext_is_session_ext -> unregister[label="yes"];
    request_ext_is_session_ext -> register_replace[label="no"];

    request_ext_is_registered -> register_replace[label="yes"];
    request_ext_is_registered -> register_new[label="no"];
}
